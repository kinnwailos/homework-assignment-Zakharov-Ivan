# k8s-dz-1


В этом задании вы закрепите на практике ключевые навыки работы с Kubernetes — основной платформой для оркестрации контейнеризированных приложений. Вы научитесь разворачивать локальный кластер, управлять жизненным циклом подов и сервисов, настраивать конфигурации и использовать основные команды kubectl для отладки. Эти умения являются фундаментальными для любой роли, связанной с разработкой, DevOps или администрированием современных облачных систем.

Цели задания:

Научиться разворачивать и проверять работоспособность локального Kubernetes-кластера.
Освоить принципы описания и развертывания приложений с помощью YAML-манифестов (Deployment, Service).
Приобрести навыки отладки приложений в кластере: выполнение команд внутри контейнера, просмотр логов, проброс портов.
Научиться управлять конфигурацией приложений с помощью ConfigMap и настраивать входящий трафик с помощью Ingress.
Это задание для самостоятельной работы — оно не будет проверяться экспертом. После загрузки вашего решения вы получите готовое решение для самопроверки.

Чек-лист подготовки к выполнению задания:

Повторите основные понятия: Pod, Deployment, Service, ConfigMap, Ingress.
Изучите справку по основным командам kubectl (get, describe, exec, logs, port-forward, delete).
Инструменты для выполнения работы

Терминал (Command Line) вашей операционной системы.
Текстовый редактор для работы с YAML-файлами (например, VS Code, Notepad++).
Утилита командной строки kubectl.
Описание заданий
Задание 1


Выполните действия:

Запустите Kubernetes локально, используя k3s или minikube на свой выбор
Добейтесь стабильной работы всех системных контейнеров
В качестве ответа пришлите скриншот результата выполнения команды kubectl get po -n kube-system
<img width="1194" height="621" alt="image" src="https://github.com/user-attachments/assets/61aaf14d-e974-4e24-bf62-77da2f577c61" />
Задание 2

Дан файл с деплоем:

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
apiVersion: apps/v1
kind: Deployment
metadata:
  name: redis
spec:
  selector:
    matchLabels:
      app: redis
  replicas: 1
  template:
    metadata:
      labels:
        app: redis
    spec:
      containers:
      - name: master
        image: bitnami/redis
        env:
         - name: REDIS_PASSWORD
           value: password123
        ports:
        - containerPort: 6379
Выполните действия:

Измените файл с учётом условий:
Redis должен запускаться без пароля
Создайте Service, который будет направлять трафик на этот Deployment
Версия образа redis должна быть зафиксирована на 6.0.13
Запустите Deployment в своём кластере и добейтесь его стабильной работы
В качестве решения пришлите получившийся файл
[task2.yaml](doc/task2.yaml)

Задание 3

Выполните действия:
Напишите команды kubectl для контейнера из предыдущего задания:

Выполнения команды ps aux внутри контейнера.
Просмотра логов контейнера за последние 5 минут.
Удаления контейнера.
Проброса порта локальной машины в контейнер для отладки.

Предположим, pod называется redis-5f4c6d7b9c-abcde.

1️ Выполнить ps aux внутри контейнера
kubectl exec -it redis-5f4c6d7b9c-abcde -- ps aux

2️ Посмотреть логи за последние 5 минут
kubectl logs redis-5f4c6d7b9c-abcde --since=5m

3️ Удалить контейнер (pod)
kubectl delete pod redis-5f4c6d7b9c-abcde


Deployment автоматически создаст новый pod.

4️ Проброс порта для отладки
kubectl port-forward redis-5f4c6d7b9c-abcde 6379:6379
После этого Redis будет доступен локально на localhost:6379.

Задание 4

Есть конфигурация nginx:

1
2
3
4
location / {
    add_header Content-Type text/plain;
    return 200 'Hello from k8s';
}
Выполните действия:

Напишите yaml-файлы для развёртки nginx, в которых будут присутствовать:

ConfigMap с конфигом nginx
Deployment, который бы подключал этот ConfigMap
Service для доступа
Ingress, который будет направлять запросы по префиксу /test на наш сервис
Инструкция к выполнению / Как выполнять задание:
1. Запуск кластера:

Для minikube: Выполните в терминале minikube start.
Для k3s: Убедитесь, что сервис k3s запущен. Команда kubectl должна быть доступна (часто настраивается как симлинк для k3s kubectl).
2. Работа с манифестами:

Создайте на своём компьютере новую папку для этого задания.
Для каждого задания создавайте отдельный YAML-файл (например, task2.yaml, task4.yaml).
Применяйте манифесты к кластеру с помощью команды kubectl apply -f ваш_файл.yaml.
Проверяйте статус созданных объектов командами kubectl get pods, kubectl get svc, kubectl get ingress.
3. Выполнение команд и отладка:

Используйте kubectl get pods чтобы узнать имя пода, с которым нужно работать в Задании 3.
Для проброса портов (kubectl port-forward) запускайте команду в отдельном окне терминала.
Правила приёма работы:
Свой ответ оформите на GitHub и прикрепите ссылку на readme.md. Ответ должен включать в себя:

Скриншот из Задания 1.
YAML-код из Задания 2.
Список команд для Задания 3.
YAML-код(ы) для Задания 4.
Вставьте ссылку на вашу работу в поле «Ссылка на решение» и нажмите «Отправить решение».

Перед сдачей задания убедитесь, что вы предоставили доступ на редактирование всем, у кого есть ссылка.

Критерии оценки:
Это задание для самостоятельной работы — оно не будет проверяться экспертом. После загрузки вашего решения вы получите эталонное решение от эксперта для самопроверки.
